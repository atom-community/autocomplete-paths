var t=require("zadeh"),e=require("buffer"),r=require("util"),n=require("child_process"),i=require("atom"),o=require("fs"),u=require("path"),s=require("events");function a(t,e,r){Object.defineProperty(t,e,{get:r,enumerable:!0})}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},f={};Object.defineProperty(f,"__esModule",{value:!0});var l=void 0;f.default=l;var h={};Object.defineProperty(h,"__esModule",{value:!0});var p=void 0;h.default=p;var d={};Object.defineProperty(d,"__esModule",{value:!0});var g=void 0;d.default=g;g={enableHtmlSupport:[{scopes:["text.html.basic"],prefixes:["src=['\"]","href=['\"]","name=['\"]"],extensions:["js","png","gif","jpeg","jpg","tiff","html","json","svg"],relative:!0}]},d.default=g,d=d.default;var v,y=(v=d)&&v.__esModule?v:{default:v};const m={normalizeSlashes:{type:"boolean",description:"Replaces backward slashes with forward slashes on windows (if possible)",default:!0},maxFileCount:{type:"number",description:"The maximum amount of files to be handled",default:2e3},suggestionPriority:{type:"number",description:"Suggestion priority of this provider. If set to a number larger than or equal to 1, suggestions will be displayed on top of default suggestions.",default:2},ignoredNames:{type:"boolean",default:!0,description:"Ignore items matched by the `Ignore Names` core option."},ignoreSubmodules:{type:"boolean",default:!1,description:"Ignore submodule directories."},ignoredPatterns:{type:"array",default:[],items:{type:"string"},description:"Ignore additional file path patterns."},ignoreBuiltinScopes:{type:"boolean",default:!1,description:"Ignore built-in scopes and use only scopes from user configuration."},scopes:{type:"array",default:[],items:{type:"object",properties:{scopes:{type:["array"],items:{type:"string"}},prefixes:{type:["array"],items:{type:"string"}},extensions:{type:["array"],items:{type:"string"}},relative:{type:"boolean",default:!0},replaceOnInsert:{type:"array",items:{type:"array",items:{type:["string","string"]}}}}}}};for(let t in y.default)m[t]={type:"boolean",default:!1};p=m,h.default=p;var b=ji(h=h.default),_={};Object.defineProperty(_,"__esModule",{value:!0});var j=void 0;_.default=j;var x,w=s,P=vi(u),D={};x=D,Object.defineProperty(x,"__esModule",{value:!0});var E={},O="object"==typeof self&&self.self===self&&self||"object"==typeof c&&c.global===c&&c||Function("return this")()||{},S=Array.prototype,B=Object.prototype,C="undefined"!=typeof Symbol?Symbol.prototype:null,A=S.push,I=S.slice,M=B.toString,T=B.hasOwnProperty,R="undefined"!=typeof ArrayBuffer,F="undefined"!=typeof DataView,$=Array.isArray,N=Object.keys,k=Object.create,W=R&&ArrayBuffer.isView,q=isNaN,L=isFinite,V=!{toString:null}.propertyIsEnumerable("toString"),G=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],z=Math.pow(2,53)-1;function H(t,e){return e=null==e?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}}function U(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function X(t){return null===t}function K(t){return void 0===t}function Z(t){return!0===t||!1===t||"[object Boolean]"===M.call(t)}function J(t){return!(!t||1!==t.nodeType)}function Q(t){var e="[object "+t+"]";return function(t){return M.call(t)===e}}var Y=Q("String"),tt=Q("Number"),et=Q("Date"),rt=Q("RegExp"),nt=Q("Error"),it=Q("Symbol"),ot=Q("ArrayBuffer"),ut=Q("Function"),st=O.document&&O.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof st&&(ut=function(t){return"function"==typeof t||!1});var at=ut,ct=Q("Object"),ft=F&&ct(new DataView(new ArrayBuffer(8))),lt="undefined"!=typeof Map&&ct(new Map),ht=Q("DataView");var pt=ft?function(t){return null!=t&&at(t.getInt8)&&ot(t.buffer)}:ht,dt=$||Q("Array");function gt(t,e){return null!=t&&T.call(t,e)}var vt=Q("Arguments");!function(){vt(arguments)||(vt=function(t){return gt(t,"callee")})}();var yt=vt;function mt(t){return!it(t)&&L(t)&&!isNaN(parseFloat(t))}function bt(t){return tt(t)&&q(t)}function _t(t){return function(){return t}}function jt(t){return function(e){var r=t(e);return"number"==typeof r&&r>=0&&r<=z}}function xt(t){return function(e){return null==e?void 0:e[t]}}var wt=xt("byteLength"),Pt=jt(wt),Dt=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Et=R?function(t){return W?W(t)&&!pt(t):Pt(t)&&Dt.test(M.call(t))}:_t(!1),Ot=xt("length");function St(t,e){e=function(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(t){return e[t]},push:function(r){return e[r]=!0,t.push(r)}}}(e);var r=G.length,n=t.constructor,i=at(n)&&n.prototype||B,o="constructor";for(gt(t,o)&&!e.contains(o)&&e.push(o);r--;)(o=G[r])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function Bt(t){if(!U(t))return[];if(N)return N(t);var e=[];for(var r in t)gt(t,r)&&e.push(r);return V&&St(t,e),e}function Ct(t){if(null==t)return!0;var e=Ot(t);return"number"==typeof e&&(dt(t)||Y(t)||yt(t))?0===e:0===Ot(Bt(t))}function At(t,e){var r=Bt(e),n=r.length;if(null==t)return!n;for(var i=Object(t),o=0;o<n;o++){var u=r[o];if(e[u]!==i[u]||!(u in i))return!1}return!0}function It(t){return t instanceof It?t:this instanceof It?void(this._wrapped=t):new It(t)}function Mt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,wt(t))}It.VERSION="1.12.0",It.prototype.value=function(){return this._wrapped},It.prototype.valueOf=It.prototype.toJSON=It.prototype.value,It.prototype.toString=function(){return String(this._wrapped)};function Tt(t,e,r,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"===i||"object"===i||"object"==typeof e)&&Rt(t,e,r,n)}function Rt(t,e,r,n){t instanceof It&&(t=t._wrapped),e instanceof It&&(e=e._wrapped);var i=M.call(t);if(i!==M.call(e))return!1;if(ft&&"[object Object]"==i&&pt(t)){if(!pt(e))return!1;i="[object DataView]"}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return C.valueOf.call(t)===C.valueOf.call(e);case"[object ArrayBuffer]":case"[object DataView]":return Rt(Mt(t),Mt(e),r,n)}var o="[object Array]"===i;if(!o&&Et(t)){if(wt(t)!==wt(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var u=t.constructor,s=e.constructor;if(u!==s&&!(at(u)&&u instanceof u&&at(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[];for(var a=(r=r||[]).length;a--;)if(r[a]===t)return n[a]===e;if(r.push(t),n.push(e),o){if((a=t.length)!==e.length)return!1;for(;a--;)if(!Tt(t[a],e[a],r,n))return!1}else{var c,f=Bt(t);if(a=f.length,Bt(e).length!==a)return!1;for(;a--;)if(!gt(e,c=f[a])||!Tt(t[c],e[c],r,n))return!1}return r.pop(),n.pop(),!0}function Ft(t,e){return Tt(t,e)}function $t(t){if(!U(t))return[];var e=[];for(var r in t)e.push(r);return V&&St(t,e),e}function Nt(t){var e=Ot(t);return function(r){if(null==r)return!1;var n=$t(r);if(Ot(n))return!1;for(var i=0;i<e;i++)if(!at(r[t[i]]))return!1;return t!==Vt||!at(r[kt])}}var kt="forEach",Wt=["clear","delete"],qt=["get","has","set"],Lt=Wt.concat(kt,qt),Vt=Wt.concat(qt),Gt=["add"].concat(Wt,kt,"has"),zt=lt?Nt(Lt):Q("Map"),Ht=lt?Nt(Vt):Q("WeakMap"),Ut=lt?Nt(Gt):Q("Set"),Xt=Q("WeakSet");function Kt(t){for(var e=Bt(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n}function Zt(t){for(var e=Bt(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n}function Jt(t){for(var e={},r=Bt(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e}function Qt(t){var e=[];for(var r in t)at(t[r])&&e.push(r);return e.sort()}function Yt(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||null==r)return r;for(var i=1;i<n;i++)for(var o=arguments[i],u=t(o),s=u.length,a=0;a<s;a++){var c=u[a];e&&void 0!==r[c]||(r[c]=o[c])}return r}}var te=Yt($t),ee=Yt(Bt),re=Yt($t,!0);function ne(t){if(!U(t))return{};if(k)return k(t);var e=function(){};e.prototype=t;var r=new e;return e.prototype=null,r}function ie(t,e){var r=ne(t);return e&&ee(r,e),r}function oe(t){return U(t)?dt(t)?t.slice():te({},t):t}function ue(t,e){return e(t),t}function se(t){return dt(t)?t:[t]}function ae(t){return It.toPath(t)}function ce(t,e){for(var r=e.length,n=0;n<r;n++){if(null==t)return;t=t[e[n]]}return r?t:void 0}function fe(t,e,r){var n=ce(t,ae(e));return K(n)?r:n}function le(t,e){for(var r=(e=ae(e)).length,n=0;n<r;n++){var i=e[n];if(!gt(t,i))return!1;t=t[i]}return!!r}function he(t){return t}function pe(t){return t=ee({},t),function(e){return At(e,t)}}function de(t){return t=ae(t),function(e){return ce(e,t)}}function ge(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return function(){return t.apply(e,arguments)}}function ve(t,e,r){return null==t?he:at(t)?ge(t,e,r):U(t)&&!dt(t)?pe(t):de(t)}function ye(t,e){return ve(t,e,1/0)}function me(t,e,r){return It.iteratee!==ye?It.iteratee(t,e):ve(t,e,r)}function be(t,e,r){e=me(e,r);for(var n=Bt(t),i=n.length,o={},u=0;u<i;u++){var s=n[u];o[s]=e(t[s],s,t)}return o}function _e(){}function je(t){return null==t?_e:function(e){return fe(t,e)}}function xe(t,e,r){var n=Array(Math.max(0,t));e=ge(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n}function we(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}It.toPath=se,It.iteratee=ye;var Pe=Date.now||function(){return(new Date).getTime()};function De(t){var e=function(e){return t[e]},r="(?:"+Bt(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(i,e):t}}var Ee={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Oe=De(Ee),Se=De(Jt(Ee)),Be=It.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ce=/(.)^/,Ae={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ie=/\\|'|\r|\n|\u2028|\u2029/g;function Me(t){return"\\"+Ae[t]}function Te(t,e,r){!e&&r&&(e=r),e=re({},e,It.templateSettings);var n,i=RegExp([(e.escape||Ce).source,(e.interpolate||Ce).source,(e.evaluate||Ce).source].join("|")+"|$","g"),o=0,u="__p+='";t.replace(i,(function(e,r,n,i,s){return u+=t.slice(o,s).replace(Ie,Me),o=s+e.length,r?u+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?u+="'+\n((__t=("+n+"))==null?'':__t)+\n'":i&&(u+="';\n"+i+"\n__p+='"),e})),u+="';\n",e.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{n=new Function(e.variable||"obj","_",u)}catch(t){throw t.source=u,t}var s=function(t){return n.call(this,t,It)},a=e.variable||"obj";return s.source="function("+a+"){\n"+u+"}",s}function Re(t,e,r){var n=(e=ae(e)).length;if(!n)return at(r)?r.call(t):r;for(var i=0;i<n;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=r,i=n),t=at(o)?o.call(t):o}return t}var Fe=0;function $e(t){var e=++Fe+"";return t?t+e:e}function Ne(t){var e=It(t);return e._chain=!0,e}function ke(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=ne(t.prototype),u=t.apply(o,i);return U(u)?u:o}var We=H((function(t,e){var r=We.placeholder,n=function(){for(var i=0,o=e.length,u=Array(o),s=0;s<o;s++)u[s]=e[s]===r?arguments[i++]:e[s];for(;i<arguments.length;)u.push(arguments[i++]);return ke(t,n,this,this,u)};return n}));We.placeholder=It;var qe=H((function(t,e,r){if(!at(t))throw new TypeError("Bind must be called on a function");var n=H((function(i){return ke(t,n,e,this,r.concat(i))}));return n})),Le=jt(Ot);function Ve(t,e,r,n){if(n=n||[],e||0===e){if(e<=0)return n.concat(t)}else e=1/0;for(var i=n.length,o=0,u=Ot(t);o<u;o++){var s=t[o];if(Le(s)&&(dt(s)||yt(s)))if(e>1)Ve(s,e-1,r,n),i=n.length;else for(var a=0,c=s.length;a<c;)n[i++]=s[a++];else r||(n[i++]=s)}return n}var Ge=H((function(t,e){var r=(e=Ve(e,!1,!1)).length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=qe(t[n],t)}return t}));function ze(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return gt(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r}var He=H((function(t,e,r){return setTimeout((function(){return t.apply(null,r)}),e)})),Ue=We(He,It,1);function Xe(t,e,r){var n,i,o,u,s=0;r||(r={});var a=function(){s=!1===r.leading?0:Pe(),n=null,u=t.apply(i,o),n||(i=o=null)},c=function(){var c=Pe();s||!1!==r.leading||(s=c);var f=e-(c-s);return i=this,o=arguments,f<=0||f>e?(n&&(clearTimeout(n),n=null),s=c,u=t.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(a,f)),u};return c.cancel=function(){clearTimeout(n),s=0,n=i=o=null},c}function Ke(t,e,r){var n,i,o=function(e,r){n=null,r&&(i=t.apply(e,r))},u=H((function(u){if(n&&clearTimeout(n),r){var s=!n;n=setTimeout(o,e),s&&(i=t.apply(this,u))}else n=He(o,e,this,u);return i}));return u.cancel=function(){clearTimeout(n),n=null},u}function Ze(t,e){return We(e,t)}function Je(t){return function(){return!t.apply(this,arguments)}}function Qe(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function Ye(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function tr(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}}var er=We(tr,2);function rr(t,e,r){e=me(e,r);for(var n,i=Bt(t),o=0,u=i.length;o<u;o++)if(e(t[n=i[o]],n,t))return n}function nr(t){return function(e,r,n){r=me(r,n);for(var i=Ot(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}}var ir=nr(1),or=nr(-1);function ur(t,e,r,n){for(var i=(r=me(r,n,1))(e),o=0,u=Ot(t);o<u;){var s=Math.floor((o+u)/2);r(t[s])<i?o=s+1:u=s}return o}function sr(t,e,r){return function(n,i,o){var u=0,s=Ot(n);if("number"==typeof o)t>0?u=o>=0?o:Math.max(o+s,u):s=o>=0?Math.min(o+1,s):o+s+1;else if(r&&o&&s)return n[o=r(n,i)]===i?o:-1;if(i!=i)return(o=e(I.call(n,u,s),bt))>=0?o+u:-1;for(o=t>0?u:s-1;o>=0&&o<s;o+=t)if(n[o]===i)return o;return-1}}var ar=sr(1,ir,ur),cr=sr(-1,or);function fr(t,e,r){var n=(Le(t)?ir:rr)(t,e,r);if(void 0!==n&&-1!==n)return t[n]}function lr(t,e){return fr(t,pe(e))}function hr(t,e,r){var n,i;if(e=ge(e,r),Le(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=Bt(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t}function pr(t,e,r){e=me(e,r);for(var n=!Le(t)&&Bt(t),i=(n||t).length,o=Array(i),u=0;u<i;u++){var s=n?n[u]:u;o[u]=e(t[s],s,t)}return o}function dr(t){var e=function(e,r,n,i){var o=!Le(e)&&Bt(e),u=(o||e).length,s=t>0?0:u-1;for(i||(n=e[o?o[s]:s],s+=t);s>=0&&s<u;s+=t){var a=o?o[s]:s;n=r(n,e[a],a,e)}return n};return function(t,r,n,i){var o=arguments.length>=3;return e(t,ge(r,i,4),n,o)}}var gr=dr(1),vr=dr(-1);function yr(t,e,r){var n=[];return e=me(e,r),hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,r){return yr(t,Je(me(e)),r)}function br(t,e,r){e=me(e,r);for(var n=!Le(t)&&Bt(t),i=(n||t).length,o=0;o<i;o++){var u=n?n[o]:o;if(!e(t[u],u,t))return!1}return!0}function _r(t,e,r){e=me(e,r);for(var n=!Le(t)&&Bt(t),i=(n||t).length,o=0;o<i;o++){var u=n?n[o]:o;if(e(t[u],u,t))return!0}return!1}function jr(t,e,r,n){return Le(t)||(t=Kt(t)),("number"!=typeof r||n)&&(r=0),ar(t,e,r)>=0}var xr=H((function(t,e,r){var n,i;return at(e)?i=e:(e=ae(e),n=e.slice(0,-1),e=e[e.length-1]),pr(t,(function(t){var o=i;if(!o){if(n&&n.length&&(t=ce(t,n)),null==t)return;o=t[e]}return null==o?o:o.apply(t,r)}))}));function wr(t,e){return pr(t,de(e))}function Pr(t,e){return yr(t,pe(e))}function Dr(t,e,r){var n,i,o=-1/0,u=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,a=(t=Le(t)?t:Kt(t)).length;s<a;s++)null!=(n=t[s])&&n>o&&(o=n);else e=me(e,r),hr(t,(function(t,r,n){((i=e(t,r,n))>u||i===-1/0&&o===-1/0)&&(o=t,u=i)}));return o}function Er(t,e,r){var n,i,o=1/0,u=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,a=(t=Le(t)?t:Kt(t)).length;s<a;s++)null!=(n=t[s])&&n<o&&(o=n);else e=me(e,r),hr(t,(function(t,r,n){((i=e(t,r,n))<u||i===1/0&&o===1/0)&&(o=t,u=i)}));return o}function Or(t,e,r){if(null==e||r)return Le(t)||(t=Kt(t)),t[we(t.length-1)];var n=Le(t)?oe(t):Kt(t),i=Ot(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,u=0;u<e;u++){var s=we(u,o),a=n[u];n[u]=n[s],n[s]=a}return n.slice(0,e)}function Sr(t){return Or(t,1/0)}function Br(t,e,r){var n=0;return e=me(e,r),wr(pr(t,(function(t,r,i){return{value:t,index:n++,criteria:e(t,r,i)}})).sort((function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index})),"value")}function Cr(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=me(n,i),hr(r,(function(e,i){var u=n(e,i,r);t(o,e,u)})),o}}var Ar=Cr((function(t,e,r){gt(t,r)?t[r].push(e):t[r]=[e]})),Ir=Cr((function(t,e,r){t[r]=e})),Mr=Cr((function(t,e,r){gt(t,r)?t[r]++:t[r]=1})),Tr=Cr((function(t,e,r){t[r?0:1].push(e)}),!0),Rr=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Fr(t){return t?dt(t)?I.call(t):Y(t)?t.match(Rr):Le(t)?pr(t,he):Kt(t):[]}function $r(t){return null==t?0:Le(t)?t.length:Bt(t).length}function Nr(t,e,r){return e in r}var kr=H((function(t,e){var r={},n=e[0];if(null==t)return r;at(n)?(e.length>1&&(n=ge(n,e[1])),e=$t(t)):(n=Nr,e=Ve(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var u=e[i],s=t[u];n(s,u,t)&&(r[u]=s)}return r})),Wr=H((function(t,e){var r,n=e[0];return at(n)?(n=Je(n),e.length>1&&(r=e[1])):(e=pr(Ve(e,!1,!1),String),n=function(t,r){return!jr(e,r)}),kr(t,n,r)}));function qr(t,e,r){return I.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))}function Lr(t,e,r){return null==t||t.length<1?null==e||r?void 0:[]:null==e||r?t[0]:qr(t,t.length-e)}function Vr(t,e,r){return I.call(t,null==e||r?1:e)}function Gr(t,e,r){return null==t||t.length<1?null==e||r?void 0:[]:null==e||r?t[t.length-1]:Vr(t,Math.max(0,t.length-e))}function zr(t){return yr(t,Boolean)}function Hr(t,e){return Ve(t,e,!1)}var Ur=H((function(t,e){return e=Ve(e,!0,!0),yr(t,(function(t){return!jr(e,t)}))})),Xr=H((function(t,e){return Ur(t,e)}));function Kr(t,e,r,n){Z(e)||(n=r,r=e,e=!1),null!=r&&(r=me(r,n));for(var i=[],o=[],u=0,s=Ot(t);u<s;u++){var a=t[u],c=r?r(a,u,t):a;e&&!r?(u&&o===c||i.push(a),o=c):r?jr(o,c)||(o.push(c),i.push(a)):jr(i,a)||i.push(a)}return i}var Zr=H((function(t){return Kr(Ve(t,!0,!0))}));function Jr(t){for(var e=[],r=arguments.length,n=0,i=Ot(t);n<i;n++){var o=t[n];if(!jr(e,o)){var u;for(u=1;u<r&&jr(arguments[u],o);u++);u===r&&e.push(o)}}return e}function Qr(t){for(var e=t&&Dr(t,Ot).length||0,r=Array(e),n=0;n<e;n++)r[n]=wr(t,n);return r}var Yr=H(Qr);function tn(t,e){for(var r={},n=0,i=Ot(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}function en(t,e,r){null==e&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i}function rn(t,e){if(null==e||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(I.call(t,n,n+=e));return r}function nn(t,e){return t._chain?It(e).chain():e}function on(t){return hr(Qt(t),(function(e){var r=It[e]=t[e];It.prototype[e]=function(){var t=[this._wrapped];return A.apply(t,arguments),nn(this,r.apply(It,t))}})),It}hr(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=S[t];It.prototype[t]=function(){var r=this._wrapped;return null!=r&&(e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0]),nn(this,r)}})),hr(["concat","join","slice"],(function(t){var e=S[t];It.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),nn(this,t)}})),a(E,"VERSION",(function(){return"1.12.0"})),a(E,"restArguments",(function(){return H})),a(E,"isObject",(function(){return U})),a(E,"isNull",(function(){return X})),a(E,"isUndefined",(function(){return K})),a(E,"isBoolean",(function(){return Z})),a(E,"isElement",(function(){return J})),a(E,"isString",(function(){return Y})),a(E,"isNumber",(function(){return tt})),a(E,"isDate",(function(){return et})),a(E,"isRegExp",(function(){return rt})),a(E,"isError",(function(){return nt})),a(E,"isSymbol",(function(){return it})),a(E,"isArrayBuffer",(function(){return ot})),a(E,"isDataView",(function(){return pt})),a(E,"isArray",(function(){return dt})),a(E,"isFunction",(function(){return at})),a(E,"isArguments",(function(){return yt})),a(E,"isFinite",(function(){return mt})),a(E,"isNaN",(function(){return bt})),a(E,"isTypedArray",(function(){return Et})),a(E,"isEmpty",(function(){return Ct})),a(E,"isMatch",(function(){return At})),a(E,"isEqual",(function(){return Ft})),a(E,"isMap",(function(){return zt})),a(E,"isWeakMap",(function(){return Ht})),a(E,"isSet",(function(){return Ut})),a(E,"isWeakSet",(function(){return Xt})),a(E,"keys",(function(){return Bt})),a(E,"allKeys",(function(){return $t})),a(E,"values",(function(){return Kt})),a(E,"pairs",(function(){return Zt})),a(E,"invert",(function(){return Jt})),a(E,"methods",(function(){return Qt})),a(E,"functions",(function(){return Qt})),a(E,"extend",(function(){return te})),a(E,"assign",(function(){return ee})),a(E,"extendOwn",(function(){return ee})),a(E,"defaults",(function(){return re})),a(E,"create",(function(){return ie})),a(E,"clone",(function(){return oe})),a(E,"tap",(function(){return ue})),a(E,"get",(function(){return fe})),a(E,"has",(function(){return le})),a(E,"mapObject",(function(){return be})),a(E,"identity",(function(){return he})),a(E,"constant",(function(){return _t})),a(E,"noop",(function(){return _e})),a(E,"toPath",(function(){return se})),a(E,"property",(function(){return de})),a(E,"propertyOf",(function(){return je})),a(E,"matches",(function(){return pe})),a(E,"matcher",(function(){return pe})),a(E,"times",(function(){return xe})),a(E,"random",(function(){return we})),a(E,"now",(function(){return Pe})),a(E,"escape",(function(){return Oe})),a(E,"unescape",(function(){return Se})),a(E,"templateSettings",(function(){return Be})),a(E,"template",(function(){return Te})),a(E,"result",(function(){return Re})),a(E,"uniqueId",(function(){return $e})),a(E,"chain",(function(){return Ne})),a(E,"iteratee",(function(){return ye})),a(E,"partial",(function(){return We})),a(E,"bind",(function(){return qe})),a(E,"bindAll",(function(){return Ge})),a(E,"memoize",(function(){return ze})),a(E,"delay",(function(){return He})),a(E,"defer",(function(){return Ue})),a(E,"throttle",(function(){return Xe})),a(E,"debounce",(function(){return Ke})),a(E,"wrap",(function(){return Ze})),a(E,"negate",(function(){return Je})),a(E,"compose",(function(){return Qe})),a(E,"after",(function(){return Ye})),a(E,"before",(function(){return tr})),a(E,"once",(function(){return er})),a(E,"findKey",(function(){return rr})),a(E,"findIndex",(function(){return ir})),a(E,"findLastIndex",(function(){return or})),a(E,"sortedIndex",(function(){return ur})),a(E,"indexOf",(function(){return ar})),a(E,"lastIndexOf",(function(){return cr})),a(E,"detect",(function(){return fr})),a(E,"find",(function(){return fr})),a(E,"findWhere",(function(){return lr})),a(E,"forEach",(function(){return hr})),a(E,"each",(function(){return hr})),a(E,"collect",(function(){return pr})),a(E,"map",(function(){return pr})),a(E,"inject",(function(){return gr})),a(E,"foldl",(function(){return gr})),a(E,"reduce",(function(){return gr})),a(E,"foldr",(function(){return vr})),a(E,"reduceRight",(function(){return vr})),a(E,"select",(function(){return yr})),a(E,"filter",(function(){return yr})),a(E,"reject",(function(){return mr})),a(E,"all",(function(){return br})),a(E,"every",(function(){return br})),a(E,"any",(function(){return _r})),a(E,"some",(function(){return _r})),a(E,"include",(function(){return jr})),a(E,"includes",(function(){return jr})),a(E,"contains",(function(){return jr})),a(E,"invoke",(function(){return xr})),a(E,"pluck",(function(){return wr})),a(E,"where",(function(){return Pr})),a(E,"max",(function(){return Dr})),a(E,"min",(function(){return Er})),a(E,"shuffle",(function(){return Sr})),a(E,"sample",(function(){return Or})),a(E,"sortBy",(function(){return Br})),a(E,"groupBy",(function(){return Ar})),a(E,"indexBy",(function(){return Ir})),a(E,"countBy",(function(){return Mr})),a(E,"partition",(function(){return Tr})),a(E,"toArray",(function(){return Fr})),a(E,"size",(function(){return $r})),a(E,"pick",(function(){return kr})),a(E,"omit",(function(){return Wr})),a(E,"take",(function(){return Lr})),a(E,"head",(function(){return Lr})),a(E,"first",(function(){return Lr})),a(E,"initial",(function(){return qr})),a(E,"last",(function(){return Gr})),a(E,"drop",(function(){return Vr})),a(E,"tail",(function(){return Vr})),a(E,"rest",(function(){return Vr})),a(E,"compact",(function(){return zr})),a(E,"flatten",(function(){return Hr})),a(E,"without",(function(){return Xr})),a(E,"unique",(function(){return Kr})),a(E,"uniq",(function(){return Kr})),a(E,"union",(function(){return Zr})),a(E,"intersection",(function(){return Jr})),a(E,"difference",(function(){return Ur})),a(E,"transpose",(function(){return Qr})),a(E,"unzip",(function(){return Qr})),a(E,"zip",(function(){return Yr})),a(E,"object",(function(){return tn})),a(E,"range",(function(){return en})),a(E,"chunk",(function(){return rn})),a(E,"mixin",(function(){return on})),a(E,"default",(function(){return It}));var un,sn,an=on(E);an._=an,un=D,sn=E,Object.keys(sn).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(un,t,{enumerable:!0,get:function(){return sn[t]}})})),a(D,"default",(function(){return an}));var cn=vi((t=>{const e=/^\\\\\?\\/.test(t),r=/[^\u0000-\u0080]+/.test(t);return e||r?t:t.replace(/\\/g,"/")})),fn={};Object.defineProperty(fn,"__esModule",{value:!0});var ln=void 0;fn.default=ln;var hn=s,pn=oi(o),dn={};dn={trimSlashes:function(t){let e=t;return"/"===e.charAt(0)&&(e=e.substr(1)),"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e},removeTrailingWhitespace:function(t){return/\\\s+$/.test(t)?t.replace(/\\(\s+)$/,"$1"):t.replace(/\s+$/,"")},isWhitespace:function(t){return/^\s*$/.test(t)},startsWithChar:function(t,e){return new RegExp(`^${e}+.*$`).test(t)}};var gn,vn=oi((function(t){let e=[];return t.split(/\n/).forEach((t=>{let r;dn.isWhitespace(t)||dn.startsWithChar(t,"#")||(r=dn.removeTrailingWhitespace(t),r=dn.trimSlashes(r),e.includes(r)||e.push(r))})),e}));gn=Vn,Vn.Minimatch=Gn;var yn={sep:"/"};try{yn=function(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}("path")}catch(t){}var mn,bn=Vn.GLOBSTAR=Gn.GLOBSTAR={},_n={};mn=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=e(t[n],n);jn(i)?r.push.apply(r,i):r.push(i)}return r};var jn=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},xn={};function wn(t,e,r){t instanceof RegExp&&(t=Pn(t,r)),e instanceof RegExp&&(e=Pn(e,r));var n=Dn(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function Pn(t,e){var r=e.match(t);return r?r[0]:null}function Dn(t,e,r){var n,i,o,u,s,a=r.indexOf(t),c=r.indexOf(e,a+1),f=a;if(a>=0&&c>0){for(n=[],o=r.length;f>=0&&!s;)f==a?(n.push(f),a=r.indexOf(t,f+1)):1==n.length?s=[n.pop(),c]:((i=n.pop())<o&&(o=i,u=c),c=r.indexOf(e,f+1)),f=a<c&&a>=0?a:c;n.length&&(s=[o,u])}return s}xn=wn,wn.range=Dn,_n=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return Nn(function(t){return t.split("\\\\").join(En).split("\\{").join(On).split("\\}").join(Sn).split("\\,").join(Bn).split("\\.").join(Cn)}(t),!0).map(In)};var En="\0SLASH"+Math.random()+"\0",On="\0OPEN"+Math.random()+"\0",Sn="\0CLOSE"+Math.random()+"\0",Bn="\0COMMA"+Math.random()+"\0",Cn="\0PERIOD"+Math.random()+"\0";function An(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function In(t){return t.split(En).join("\\").split(On).join("{").split(Sn).join("}").split(Bn).join(",").split(Cn).join(".")}function Mn(t){if(!t)return[""];var e=[],r=xn("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,u=n.split(",");u[u.length-1]+="{"+i+"}";var s=Mn(o);return o.length&&(u[u.length-1]+=s.shift(),u.push.apply(u,s)),e.push.apply(e,u),e}function Tn(t){return"{"+t+"}"}function Rn(t){return/^-?0\d/.test(t)}function Fn(t,e){return t<=e}function $n(t,e){return t>=e}function Nn(t,e){var r=[],n=xn("{","}",t);if(!n||/\$$/.test(n.pre))return[t];var i,o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),s=o||u,a=n.body.indexOf(",")>=0;if(!s&&!a)return n.post.match(/,.*\}/)?Nn(t=n.pre+"{"+n.body+Sn+n.post):[t];if(s)i=n.body.split(/\.\./);else if(1===(i=Mn(n.body)).length&&1===(i=Nn(i[0],!1).map(Tn)).length)return(l=n.post.length?Nn(n.post,!1):[""]).map((function(t){return n.pre+i[0]+t}));var c,f=n.pre,l=n.post.length?Nn(n.post,!1):[""];if(s){var h=An(i[0]),p=An(i[1]),d=Math.max(i[0].length,i[1].length),g=3==i.length?Math.abs(An(i[2])):1,v=Fn;p<h&&(g*=-1,v=$n);var y=i.some(Rn);c=[];for(var m=h;v(m,p);m+=g){var b;if(u)"\\"===(b=String.fromCharCode(m))&&(b="");else if(b=String(m),y){var _=d-b.length;if(_>0){var j=new Array(_+1).join("0");b=m<0?"-"+j+b.slice(1):j+b}}c.push(b)}}else c=mn(i,(function(t){return Nn(t,!1)}));for(var x=0;x<c.length;x++)for(var w=0;w<l.length;w++){var P=f+c[x]+l[w];(!e||s||P)&&r.push(P)}return r}var kn={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Wn="().*{}+?[]^$\\!".split("").reduce((function(t,e){return t[e]=!0,t}),{});var qn=/\/+/;function Ln(t,e){t=t||{},e=e||{};var r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),Object.keys(t).forEach((function(e){r[e]=t[e]})),r}function Vn(t,e,r){if("string"!=typeof e)throw new TypeError("glob pattern string required");return r||(r={}),!(!r.nocomment&&"#"===e.charAt(0))&&(""===e.trim()?""===t:new Gn(e,r).match(t))}function Gn(t,e){if(!(this instanceof Gn))return new Gn(t,e);if("string"!=typeof t)throw new TypeError("glob pattern string required");e||(e={}),t=t.trim(),"/"!==yn.sep&&(t=t.split(yn.sep).join("/")),this.options=e,this.set=[],this.pattern=t,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function zn(t,e){if(e||(e=this instanceof Gn?this.options:{}),void 0===(t=void 0===t?this.pattern:t))throw new TypeError("undefined pattern");return e.nobrace||!t.match(/\{.*\}/)?[t]:_n(t)}Vn.filter=function(t,e){return e=e||{},function(r,n,i){return Vn(r,t,e)}},Vn.defaults=function(t){if(!t||!Object.keys(t).length)return Vn;var e=Vn,r=function(r,n,i){return e.minimatch(r,n,Ln(t,i))};return r.Minimatch=function(r,n){return new e.Minimatch(r,Ln(t,n))},r},Gn.defaults=function(t){return t&&Object.keys(t).length?Vn.defaults(t).Minimatch:Gn},Gn.prototype.debug=function(){},Gn.prototype.make=function(){if(this._made)return;var t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate();var r=this.globSet=this.braceExpand();e.debug&&(this.debug=console.error);this.debug(this.pattern,r),r=this.globParts=r.map((function(t){return t.split(qn)})),this.debug(this.pattern,r),r=r.map((function(t,e,r){return t.map(this.parse,this)}),this),this.debug(this.pattern,r),r=r.filter((function(t){return-1===t.indexOf(!1)})),this.debug(this.pattern,r),this.set=r},Gn.prototype.parseNegate=function(){var t=this.pattern,e=!1,r=this.options,n=0;if(r.nonegate)return;for(var i=0,o=t.length;i<o&&"!"===t.charAt(i);i++)e=!e,n++;n&&(this.pattern=t.substr(n));this.negate=e},Vn.braceExpand=function(t,e){return zn(t,e)},Gn.prototype.braceExpand=zn,Gn.prototype.parse=function(t,e){if(t.length>65536)throw new TypeError("pattern is too long");var r=this.options;if(!r.noglobstar&&"**"===t)return bn;if(""===t)return"";var n,i="",o=!!r.nocase,u=!1,s=[],a=[],c=!1,f=-1,l=-1,h="."===t.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",p=this;function d(){if(n){switch(n){case"*":i+="[^/]*?",o=!0;break;case"?":i+="[^/]",o=!0;break;default:i+="\\"+n}p.debug("clearStateChar %j %j",n,i),n=!1}}for(var g,v=0,y=t.length;v<y&&(g=t.charAt(v));v++)if(this.debug("%s\t%s %s %j",t,v,i,g),u&&Wn[g])i+="\\"+g,u=!1;else switch(g){case"/":return!1;case"\\":d(),u=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",t,v,i,g),c){this.debug("  in class"),"!"===g&&v===l+1&&(g="^"),i+=g;continue}p.debug("call clearStateChar %j",n),d(),n=g,r.noext&&d();continue;case"(":if(c){i+="(";continue}if(!n){i+="\\(";continue}s.push({type:n,start:v-1,reStart:i.length,open:kn[n].open,close:kn[n].close}),i+="!"===n?"(?:(?!(?:":"(?:",this.debug("plType %j %j",n,i),n=!1;continue;case")":if(c||!s.length){i+="\\)";continue}d(),o=!0;var m=s.pop();i+=m.close,"!"===m.type&&a.push(m),m.reEnd=i.length;continue;case"|":if(c||!s.length||u){i+="\\|",u=!1;continue}d(),i+="|";continue;case"[":if(d(),c){i+="\\"+g;continue}c=!0,l=v,f=i.length,i+=g;continue;case"]":if(v===l+1||!c){i+="\\"+g,u=!1;continue}if(c){var b=t.substring(l+1,v);try{RegExp("["+b+"]")}catch(t){var _=this.parse(b,Hn);i=i.substr(0,f)+"\\["+_[0]+"\\]",o=o||_[1],c=!1;continue}}o=!0,c=!1,i+=g;continue;default:d(),u?u=!1:!Wn[g]||"^"===g&&c||(i+="\\"),i+=g}c&&(b=t.substr(l+1),_=this.parse(b,Hn),i=i.substr(0,f)+"\\["+_[0],o=o||_[1]);for(m=s.pop();m;m=s.pop()){var j=i.slice(m.reStart+m.open.length);this.debug("setting tail",i,m),j=j.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(t,e,r){return r||(r="\\"),e+e+r+"|"})),this.debug("tail=%j\n   %s",j,j,m,i);var x="*"===m.type?"[^/]*?":"?"===m.type?"[^/]":"\\"+m.type;o=!0,i=i.slice(0,m.reStart)+x+"\\("+j}d(),u&&(i+="\\\\");var w=!1;switch(i.charAt(0)){case".":case"[":case"(":w=!0}for(var P=a.length-1;P>-1;P--){var D=a[P],E=i.slice(0,D.reStart),O=i.slice(D.reStart,D.reEnd-8),S=i.slice(D.reEnd-8,D.reEnd),B=i.slice(D.reEnd);S+=B;var C=E.split("(").length-1,A=B;for(v=0;v<C;v++)A=A.replace(/\)[+*?]?/,"");var I="";""===(B=A)&&e!==Hn&&(I="$"),i=E+O+B+I+S}""!==i&&o&&(i="(?=.)"+i);w&&(i=h+i);if(e===Hn)return[i,o];if(!o)return function(t){return t.replace(/\\(.)/g,"$1")}(t);var M=r.nocase?"i":"";try{var T=new RegExp("^"+i+"$",M)}catch(t){return new RegExp("$.")}return T._glob=t,T._src=i,T};var Hn={};Vn.makeRe=function(t,e){return new Gn(t,e||{}).makeRe()},Gn.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var t=this.set;if(!t.length)return this.regexp=!1,this.regexp;var e=this.options,r=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=e.nocase?"i":"",i=t.map((function(t){return t.map((function(t){return t===bn?r:"string"==typeof t?function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(t):t._src})).join("\\/")})).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(t){this.regexp=!1}return this.regexp},Vn.match=function(t,e,r){var n=new Gn(e,r=r||{});return t=t.filter((function(t){return n.match(t)})),n.options.nonull&&!t.length&&t.push(e),t},Gn.prototype.match=function(t,e){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;var r=this.options;"/"!==yn.sep&&(t=t.split(yn.sep).join("/"));t=t.split(qn),this.debug(this.pattern,"split",t);var n,i,o=this.set;for(this.debug(this.pattern,"set",o),i=t.length-1;i>=0&&!(n=t[i]);i--);for(i=0;i<o.length;i++){var u=o[i],s=t;if(r.matchBase&&1===u.length&&(s=[n]),this.matchOne(s,u,e))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate},Gn.prototype.matchOne=function(t,e,r){var n=this.options;this.debug("matchOne",{this:this,file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var i=0,o=0,u=t.length,s=e.length;i<u&&o<s;i++,o++){this.debug("matchOne loop");var a,c=e[o],f=t[i];if(this.debug(e,c,f),!1===c)return!1;if(c===bn){this.debug("GLOBSTAR",[e,c,f]);var l=i,h=o+1;if(h===s){for(this.debug("** at the end");i<u;i++)if("."===t[i]||".."===t[i]||!n.dot&&"."===t[i].charAt(0))return!1;return!0}for(;l<u;){var p=t[l];if(this.debug("\nglobstar while",t,l,e,h,p),this.matchOne(t.slice(l),e.slice(h),r))return this.debug("globstar found match!",l,u,p),!0;if("."===p||".."===p||!n.dot&&"."===p.charAt(0)){this.debug("dot detected!",t,l,e,h);break}this.debug("globstar swallow a segment, and continue"),l++}return!(!r||(this.debug("\n>>> no match, partial?",t,l,e,h),l!==u))}if("string"==typeof c?(a=n.nocase?f.toLowerCase()===c.toLowerCase():f===c,this.debug("string match",c,f,a)):(a=f.match(c),this.debug("pattern match",c,f,a)),!a)return!1}if(i===u&&o===s)return!0;if(i===u)return r;if(o===s)return i===u-1&&""===t[i];throw new Error("wtf?")};var Un=oi(gn),Xn=i,Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});var Zn=ni;Kn.merge=Zn;var Jn=ii;Kn.unique=Jn;var Qn=function(t,e){return ni(t,e),ii(t)};Kn.union=Qn;var Yn=(ri=void 0,Kn.exec=ri);Kn.MAX_STRING_LENGTH=Yn;var ti=n,ei=e;var ri=(0,r.promisify)(ti.exec);Kn.exec=ri;function ni(t,e){e.length&&Array.prototype.push.apply(t,e)}function ii(t){return[...new Set(t)]}function oi(t){return t&&t.__esModule?t:{default:t}}Yn=ei.constants.MAX_STRING_LENGTH,Kn.MAX_STRING_LENGTH=Yn;class ui extends hn.EventEmitter{constructor(){super();const t=this.rebuildCache.bind(this);this._projectChangeWatcher=atom.project.onDidChangePaths(t);const e=this._onDidChangeFiles.bind(this);this._projectWatcher=atom.project.onDidChangeFiles(e),this._repositories=[],this._filePathsByProjectDirectory=new Map,this._filePathsByDirectory=new Map,this._fileWatchersByDirectory=new Map,this.updateConfig()}updateConfig(){this.config={excludeVcsIgnoredPaths:atom.config.get("core.excludeVcsIgnoredPaths"),ignoreSubmodules:atom.config.get("autocomplete-paths.ignoreSubmodules"),shouldIgnoredNames:atom.config.get("autocomplete-paths.ignoredNames"),ignoredNames:atom.config.get("core.ignoredNames"),ignoredPatterns:atom.config.get("autocomplete-paths.ignoredPatterns"),maxFileCount:atom.config.get("autocomplete-paths.maxFileCount")}}_isPathIgnored(t){let e=!1;return this.config.excludeVcsIgnoredPaths&&this._repositories.forEach((r=>{if(e)return;const n=this.config.ignoreSubmodules&&r.isSubmodule(t);(r.isPathIgnored(t)||n)&&(e=!0)})),this.config.shouldIgnoredNames&&this.config.ignoredNames.forEach((r=>{e||(e=e||(0,Un.default)(t,r,{matchBase:!0,dot:!0}))})),this.config.ignoredPatterns&&this.config.ignoredPatterns.forEach((r=>{e||(e=e||(0,Un.default)(t,r,{dot:!0}))})),e}async _cacheProjectPathsAndRepositories(){this._projectDirectories=atom.project.getDirectories();const t=this._projectDirectories.length;let e=new Array(t);for(let r=0;r<t;r++)e[r]=atom.project.repositoryForDirectory(this._projectDirectories[r]);const r=await Promise.all(e);this._repositories=r.filter((t=>null!==t))}_onDirectoryChanged(t,e){this._removeFilePathsForDirectory(t,e),this._cleanWatchersForDirectory(e),this._cacheDirectoryFilePaths(t,e)}_cleanWatchersForDirectory(t){this._fileWatchersByDirectory.forEach(((e,r)=>{t.contains(r.path)&&(e.dispose(),this._fileWatchersByDirectory.delete(r))}))}_removeFilePathsForDirectory(t,e){let r=this._filePathsByProjectDirectory.get(t.path);r&&(r=r.filter((t=>!e.contains(t))),this._filePathsByProjectDirectory.set(t.path,r),this._filePathsByDirectory.delete(e.path))}async _cacheDirectoryFilePaths(t,e){if(this._cancelled)return[];if("win32"!==process.platform){let r=this._fileWatchersByDirectory.get(e);r||(r=e.onDidChange((()=>this._onDirectoryChanged(t,e))),this._fileWatchersByDirectory.set(e,r))}const r=await this._getDirectoryEntries(e);if(this._cancelled)return[];let n=[],i=[];for(let t=0,e=r.length;t<e;t++){const e=r[t];e instanceof Xn.File&&!this._isPathIgnored(e.path)?n.push(e.path):e instanceof Xn.Directory&&!this._isPathIgnored(e.path)&&i.push(e)}let o=this._filePathsByProjectDirectory.get(t.path)||[];return o.length+n.length>this.config.maxFileCount&&!this._cancelled?(atom.notifications.addError("autocomplete-paths",{description:`Maximum file count of ${this.config.maxFileCount} has been exceeded. Path autocompletion will not work in this project.<br /><br /><a href="https://github.com/atom-community/autocomplete-paths/wiki/Troubleshooting#maximum-file-limit-exceeded">Click here to learn more.</a>`,dismissable:!0}),this._filePathsByProjectDirectory.clear(),this._filePathsByDirectory.clear(),this._cancelled=!0,void this.emit("rebuild-cache-done")):(this._filePathsByProjectDirectory.set(t.path,(0,Kn.union)(o,n)),o=this._filePathsByDirectory.get(e.path)||[],this._filePathsByDirectory.set(e.path,(0,Kn.union)(o,n)),Promise.all(i.map((e=>this._cacheDirectoryFilePaths(t,e)))))}_getDirectoryEntries(t){return new Promise(((e,r)=>{t.getEntries(((t,n)=>{if(t)return r(t);e(n)}))}))}rebuildCache(){return this.dispose(),this._cancelled=!1,this.emit("rebuild-cache"),(0,Kn.exec)("find",["--version"],{maxBuffer:Kn.MAX_STRING_LENGTH}).then((()=>this._buildInitialCacheWithFind()),(()=>this._buildInitialCache()))}async _buildInitialCache(){await this._cacheProjectPathsAndRepositories();const t=await Promise.all(this._projectDirectories.map((t=>this._cacheDirectoryFilePaths(t,t))));return this.emit("rebuild-cache-done"),t}getFilePathsForProjectDirectory(t,e=null){let r=this._filePathsByProjectDirectory.get(t.path)||[];return e?r.filter((t=>0===t.indexOf(e))):r}dispose(t){this._fileWatchersByDirectory.forEach((t=>{t.dispose()})),this._fileWatchersByDirectory=new Map,this._filePathsByProjectDirectory=new Map,this._filePathsByDirectory=new Map,this._repositories=[],this._projectWatcher&&(this._projectWatcher.dispose(),this._projectWatcher=null),t&&this._projectChangeWatcher&&(this._projectChangeWatcher.dispose(),this._projectChangeWatcher=null)}async _buildInitialCacheWithFind(){await this._cacheProjectPathsAndRepositories();const t=await Promise.all(this._projectDirectories.map(this._populateCacheFor.bind(this)));return this.emit("rebuild-cache-done"),t}_onDidChangeFiles(t){t.filter((t=>"modified"!==t.action)).forEach((t=>{if(!this._projectDirectories)return;const{action:e,path:r,oldPath:n}=t,i=this._projectDirectories.find((t=>0===r.indexOf(t.path)));if(!i)return;const o=i.path;if(this._isPathIgnored(r))return;const u=this._filePathsByProjectDirectory.get(o)||[];switch(e){case"created":u.push(r);break;case"deleted":const t=u.indexOf(r);t>-1&&u.splice(t,1);break;case"renamed":const e=u.indexOf(n);e>-1&&(u[e]=r)}this._filePathsByProjectDirectory.has(o)||this._filePathsByProjectDirectory.set(o,u)}))}_getIgnorePatterns(t){const e=[];if(this.config.shouldIgnoredNames&&this.config.ignoredNames.forEach((t=>e.push(t))),this.config.excludeVcsIgnoredPaths)try{const r=pn.default.readFileSync(t+"/.gitignore","utf-8");(0,vn.default)(r).forEach((t=>e.push(t)))}catch(t){}return this.config.ignoredPatterns&&this.config.ignoredPatterns.forEach((t=>e.push(t))),e}async _populateCacheFor(t){const e=t.path,r=["-L",e+"/","-type","f","-not","-regex","'.*\\("+this._getIgnorePatterns(e).map((t=>t.replace(/\./g,"\\.").replace(/\*/g,".*"))).join("\\|")+"\\).*'"],n=zr((await spawn("find",r)).toString().split("\n"));return this._filePathsByProjectDirectory.set(e,n),n}}ln=ui,fn.default=ln;var si=vi(fn=fn.default),ai=t,ci={};Object.defineProperty(ci,"__esModule",{value:!0});var fi=void 0;ci.default=fi;const li=["import\\s+.*?from\\s+['\"]","import\\s+['\"]","require\\(['\"]","define\\(\\[?['\"]"],hi=["js","jsx","ts","tsx","coffee","json"],pi=[["\\.jsx?$",""],["\\.ts$",""],["\\.coffee$",""]];fi=[{scopes:["source.js","source.js.jsx","source.coffee","source.coffee.jsx","source.ts","source.tsx","javascript","source.flow"],prefixes:li,extensions:hi,relative:!0,replaceOnInsert:[["([\\/]?index)?\\.jsx?$",""],["([\\/]?index)?\\.ts$",""],["([\\/]?index)?\\.coffee$",""]]},{scopes:["text.html.vue"],prefixes:li,extensions:hi.concat("vue"),relative:!0,replaceOnInsert:pi},{scopes:["text.html.vue"],prefixes:["@import[\\(|\\s+]?['\"]"],extensions:["css","sass","scss","less","styl"],relative:!0,replaceOnInsert:[["(/)?_([^/]*?)$","$1$2"]]},{scopes:["source.coffee","source.coffee.jsx"],prefixes:["require\\s+['\"]","define\\s+\\[?['\"]"],extensions:hi,relative:!0,replaceOnInsert:pi},{scopes:["source.php"],prefixes:["require_once\\(['\"]","include\\(['\"]"],extensions:["php"],relative:!0},{scopes:["source.sass","source.css.scss","source.css.less","source.stylus"],prefixes:["@import[\\(|\\s+]?['\"]"],extensions:["sass","scss","css"],relative:!0,replaceOnInsert:[["(/)?_([^/]*?)$","$1$2"]]},{scopes:["source.css"],prefixes:["@import\\s+['\"]?","@import\\s+url\\(['\"]?"],extensions:["css"],relative:!0},{scopes:["source.css","source.sass","source.css.less","source.css.scss","source.stylus"],prefixes:["url\\(['\"]?"],extensions:["png","gif","jpeg","jpg","woff","woff2","ttf","svg","otf"],relative:!0},{scopes:["source.c","source.cpp"],prefixes:["^\\s*#include\\s+['\"]"],extensions:["h","hpp"],relative:!0,includeCurrentDirectory:!1},{scopes:["source.lua"],prefixes:["require[\\s+|\\(]['\"]"],extensions:["lua"],relative:!0,includeCurrentDirectory:!1,replaceOnInsert:[["\\/","."],["\\\\","."],["\\.lua$",""]]},{scopes:["source.ruby"],prefixes:["^\\s*require[\\s+|\\(]['\"]"],extensions:["rb"],relative:!0,includeCurrentDirectory:!1,replaceOnInsert:[["\\.rb$",""]]},{scopes:["source.python"],prefixes:["^\\s*from\\s+","^\\s*import\\s+"],extensions:["py"],relative:!0,includeCurrentDirectory:!1,replaceOnInsert:[["\\/","."],["\\\\","."],["\\.py$",""]]}],ci.default=fi;var di=vi(ci=ci.default),gi=vi(d);function vi(t){return t&&t.__esModule?t:{default:t}}class yi extends w.EventEmitter{constructor(){super(),this.reloadScopes(),this._pathsCache=new si.default,this._isReady=!1,this._onRebuildCache=this._onRebuildCache.bind(this),this._onRebuildCacheDone=this._onRebuildCacheDone.bind(this),this._pathsCache.on("rebuild-cache",this._onRebuildCache),this._pathsCache.on("rebuild-cache-done",this._onRebuildCacheDone)}reloadScopes(){for(var t in this._scopes=atom.config.get("autocomplete-paths.scopes").slice(0)||[],atom.config.get("autocomplete-paths.ignoreBuiltinScopes")||(this._scopes=this._scopes.concat(di.default)),gi.default)atom.config.get(`autocomplete-paths.${t}`)&&(this._scopes=this._scopes.slice(0).concat(gi.default[t]))}_onRebuildCache(){this.emit("rebuild-cache")}_onRebuildCacheDone(){this.emit("rebuild-cache-done")}_scopeMatchesRequest(t,e){const r=Array.isArray(t.scopes)?t.scopes:[t.scopes];if(!(Jr(e.scopeDescriptor.getScopesArray(),r).length>0))return!1;const n=this._getLineTextForRequest(e);let i=null;return(Array.isArray(t.prefixes)?t.prefixes:[t.prefixes]).forEach((t=>{const e=new RegExp(t,"i");i=i||n.match(e)})),i}_getLineTextForRequest(t){const{editor:e,bufferPosition:r}=t;return e.getTextInRange([[r.row,0],r])}_getSuggestionsForScope(t,e,r){const n=this._getLineTextForRequest(e).substr(r.index+r[0].length),i=n.match(/[/|\\]$/),o=0===n.indexOf("./")||0===n.indexOf("../"),u=P.default.parse(n);i&&(u.dir=P.default.join(u.dir,u.base),u.base="",u.name="");const s=this._getProjectDirectory(e.editor);if(!s)return Promise.resolve([]);const a=P.default.dirname(e.editor.getPath()),c=P.default.resolve(a,u.dir);let f=o?this._pathsCache.getFilePathsForProjectDirectory(s,c):this._pathsCache.getFilePathsForProjectDirectory(s);const l=o?u.base:n,{extensions:h}=t;if(h){const t=new RegExp(`.(${h.join("|")})$`);f=f.filter((e=>t.test(e)))}l&&(f=(0,ai.filter)(f,l,{maxResults:10}));let p=f.map((r=>{const i=atom.config.get("autocomplete-paths.normalizeSlashes"),u=atom.project.relativizePath(r)[1];let s=u;o&&(s=P.default.relative(c,r)),i&&(s=(0,cn.default)(s));let a=P.default.relative(P.default.dirname(e.editor.getPath()),r);i&&(a=(0,cn.default)(a)),!1!==t.relative&&(r=a,!1!==t.includeCurrentDirectory&&"."!==r[0]&&(r=`./${r}`)),t.projectRelativePath&&(r=(0,cn.default)(u)),t.replaceOnInsert&&t.replaceOnInsert.forEach((([t,e])=>{const n=new RegExp(t);n.test(r)&&(r=r.replace(n,e))}));const f=a.split(P.default.sep).length;return{text:r,replacementPrefix:n,displayText:s,type:"import",iconHTML:'<i class="icon-file-code"></i>',score:(0,ai.score)(s,e.prefix),distanceToFile:f}}));const d=p.length;if(p.length){const t=Dr(p,(t=>t.distanceToFile)).distanceToFile;p.forEach(((e,r)=>{e.score=d-r+(t-e.distanceToFile)})),p.sort(((t,e)=>e.score-t.score))}return Promise.resolve(p)}async getSuggestions(t){const e=this._scopes.map((e=>[e,this._scopeMatchesRequest(e,t)])).filter((t=>t[1])).map((([e,r])=>this._getSuggestionsForScope(e,t,r))),r=Hr(await Promise.all(e));return!!r.length&&r}async rebuildCache(){const t=await this._pathsCache.rebuildCache();return this._isReady=!0,t}_getProjectDirectory(t){const e=t.getBuffer().getPath();let r=null;return atom.project.getDirectories().forEach((t=>{t.contains(e)&&(r=t)})),r}isReady(){return this._isReady}get suggestionPriority(){return atom.config.get("autocomplete-paths.suggestionPriority")}get fileCount(){return atom.project.getDirectories().reduce(((t,e)=>t+this._pathsCache.getFilePathsForProjectDirectory(e).length),0)}dispose(){this._pathsCache.removeListener("rebuild-cache",this._onRebuildCache),this._pathsCache.removeListener("rebuild-cache-done",this._onRebuildCacheDone),this._pathsCache.dispose(!0)}}j=yi,_.default=j,yi.prototype.selector="*",yi.prototype.inclusionPriority=1;var mi=ji(_=_.default),bi=i,_i=ji(d);function ji(t){return t&&t.__esModule?t:{default:t}}l={config:b.default,subscriptions:null,activate:function(){this.subscriptions=new bi.CompositeDisposable,this.subscriptions.add(atom.commands.add("atom-workspace",{"autocomplete-paths:rebuild-cache":()=>{this._provider.rebuildCache()}}));["core.ignoredNames","core.excludeVcsIgnoredPaths","autocomplete-paths.ignoreSubmodules","autocomplete-paths.ignoredNames","autocomplete-paths.ignoredPatterns","autocomplete-paths.maxFileCount"].forEach((t=>{this.subscriptions.add(atom.config.observe(t,(t=>{this._provider&&(this._provider._pathsCache.updateConfig(),this._provider.rebuildCache())})))}));const t=["autocomplete-paths.scopes"];for(let e in _i.default)t.push(`autocomplete-paths.${e}`);t.forEach((t=>{this.subscriptions.add(atom.config.observe(t,(t=>{this._provider&&this._provider.reloadScopes()})))}))},deactivate:function(){this._statusBarInterval&&clearInterval(this._statusBarInterval),this.subscriptions.dispose(),this._provider&&(this._provider.dispose(!0),this._provider=null),this._statusBarTile&&(this._statusBarTile.destroy(),this._statusBarTile=null)},consumeStatusBar:function(t){this._statusBar=t,this._displayStatusBarItemOnConsumption&&this._displayStatusBarTile()},_displayStatusBarTile(){this._statusBar?this._statusBarTile||(this._statusBarElement=document.createElement("autocomplete-paths-status-bar"),this._statusBarElement.innerHTML="Rebuilding paths cache...",this._statusBarTile=this._statusBar.addRightTile({item:this._statusBarElement,priority:100}),(this._provider||(this.getProvider(),this._provider))&&(this._statusBarInterval=setInterval((()=>{const t=this._provider.fileCount;t>0&&(this._statusBarElement.innerHTML=`Rebuilding paths cache... ${t} files`)}),500))):this._displayStatusBarItemOnConsumption=!0},_hideStatusBarTile(){this._statusBarInterval&&clearInterval(this._statusBarInterval),this._statusBarTile&&this._statusBarTile.destroy(),this._statusBarTile=null,this._statusBarElement=null},getProvider:function(){return this._provider||(this._provider=new mi.default,this._provider.on("rebuild-cache",(()=>{this._displayStatusBarTile()})),this._provider.on("rebuild-cache-done",(()=>{this._hideStatusBarTile()})),this._provider.rebuildCache()),this._provider}},f.default=l,f=f.default,module.exports=f;
//# sourceMappingURL=autocomplete-paths.js.map
